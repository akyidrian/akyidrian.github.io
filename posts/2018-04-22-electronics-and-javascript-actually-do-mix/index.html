<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Electronics and JavaScript Actually Do Mix | Aydin Arik</title>
<meta name=keywords content="javascript,js,nodejs,johnny-five,arduino"><meta name=description content="My First Impressions of the Johnny-Five Platform"><meta name=author content="Aydin Arik"><link rel=canonical href=https://akyidrian.github.io/posts/2018-04-22-electronics-and-javascript-actually-do-mix/><link crossorigin=anonymous href=/assets/css/stylesheet.16990db3e925d220c367378e79360da7a066f076238e9d9765e8013d0f9aafc5.css integrity="sha256-FpkNs+kl0iDDZzeOeTYNp6Bm8HYjjp2XZegBPQ+ar8U=" rel="preload stylesheet" as=style><link rel=icon href=https://akyidrian.github.io/favicon/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://akyidrian.github.io/favicon/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://akyidrian.github.io/favicon/favicon-32x32.png><link rel=apple-touch-icon href=https://akyidrian.github.io/favicon/apple-touch-icon.png><link rel=mask-icon href=https://akyidrian.github.io/favicon/favicon-32x32.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://akyidrian.github.io/posts/2018-04-22-electronics-and-javascript-actually-do-mix/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><meta property="og:title" content="Electronics and JavaScript Actually Do Mix"><meta property="og:description" content="My First Impressions of the Johnny-Five Platform"><meta property="og:type" content="article"><meta property="og:url" content="https://akyidrian.github.io/posts/2018-04-22-electronics-and-javascript-actually-do-mix/"><meta property="og:image" content="https://akyidrian.github.io/posts/2018-04-22-electronics-and-javascript-actually-do-mix/images/arduinoSetup.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-04-22T00:00:00+00:00"><meta property="article:modified_time" content="2018-04-22T00:00:00+00:00"><meta property="og:site_name" content="Aydin Arik"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://akyidrian.github.io/posts/2018-04-22-electronics-and-javascript-actually-do-mix/images/arduinoSetup.jpg"><meta name=twitter:title content="Electronics and JavaScript Actually Do Mix"><meta name=twitter:description content="My First Impressions of the Johnny-Five Platform"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://akyidrian.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Electronics and JavaScript Actually Do Mix","item":"https://akyidrian.github.io/posts/2018-04-22-electronics-and-javascript-actually-do-mix/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Electronics and JavaScript Actually Do Mix","name":"Electronics and JavaScript Actually Do Mix","description":"My First Impressions of the Johnny-Five Platform","keywords":["javascript","js","nodejs","johnny-five","arduino"],"articleBody":"Since earning my EEE degree in 2013, I’ve been amazed by the revolution in hardware prototyping driven by Arduino and Raspberry Pi. These platforms have democratised electronics, making them accessible to beginners. Equally fascinating is the evolution of JavaScript, which has grown from merely allowing the creation of dynamic web pages to enabling direct hardware control. Many of these now-commonplace tools were unavailable during my studies, making me envious of today’s newcomers, yet excited for the rapid technological advancements to come.\nDuring the NodeBots Workshop at Conf \u0026 Coffee 2018, I had the opportunity to revisit the basics and experiment with the open-source Johnny-Five platform using an Arduino Uno. Johnny-Five, a Node.js library, facilitates JS programming for a wide range of development boards, with a focus on robotics and IoT applications. It relies on the Firmata protocol to communicate with microcontrollers, and offers compatibility with custom boards too.\nGetting Started Let’s explore some of Johnny-Five’s capabilities by first creating a simple LED blinking program:\nvar five = require('johnny-five'); var board = new five.Board(); board.on('ready', function () { var led = new five.Led(13); led.blink(1000); // in ms }); As you can see, minimal code is required!\nIn addition to basic output control, Johnny-Five makes it easy to handle asynchronous events from various inputs. For example, here’s how you can toggle an LED using a button press:\nvar five = require('johnny-five'); var board = new five.Board(); board.on('ready', function () { var led = new five.Led(13); var button = new five.Button(5); button.on(\"press\", function() { led.toggle(); }); }); You can also utilise Johnny-Five for sensor inputs, such as a photoresistor:\nvar five = require('johnny-five'); var board = new five.Board(); board.on('ready', function () { var led = new five.Led(13); var sensor = new five.Sensor(\"A0\"); sensor.on(\"change\", function() { if(this.value \u003e 600) { led.on(); } else { led.off(); } }); }); These simple examples demonstrate the ease of integrating hardware input-output with Johnny-Five. At no point did we need to write code for the round-robin loop, tune the loop frequency, configure data direction registers or mask the right pins with bit manipulation.\nClient-Server Interaction One surprising feature of Johnny-Five for me was its ability to create client-server scenarios effortlessly. For instance, you can set up a UDP client using Node.js on your developer machine to communicate with an Arduino server via USB:\nvar dgram = require('dgram'); var client = dgram.createSocket('udp4'); // Send empty datagrams over port 1337 client.send(\"\", 1337, 'localhost', function(err) { console.error(\"Failed to send. Is your Arduino running 'server.js'?\\n\"); client.close(); }); On the Arduino side, you can create a server to respond to incoming datagrams or trigger actions, such as playing a tune over a connected piezo speaker:\nvar dgram = require('dgram'); var five = require('johnny-five'); var board = new five.Board(); board.on('ready', function () { var piezo = new five.Piezo(8); var server = dgram.createSocket('udp4'); server.on('message', function() { piezo.play({ song: [ [\"C4\", 1 / 4], [\"D4\", 1 / 4], [\"F4\", 1 / 4], [\"D4\", 1 / 4], [\"A4\", 1 / 4], [null, 1 / 4], [\"A4\", 1], [\"G4\", 1], [null, 1 / 2], [\"C4\", 1 / 4], [\"D4\", 1 / 4], [\"F4\", 1 / 4], [\"D4\", 1 / 4], [\"G4\", 1 / 4], [null, 1 / 4], [\"G4\", 1], [\"F4\", 1], [null, 1 / 2] ], tempo: 100 }); }); server.bind(1337); }); On a similar note, I experimented with dnode, an asynchronous RPC system for Node.js that facilitates remote function calls. A client, running on a developer’s machine, connects to a server and calls a remote getTemperature function:\nvar dnode = require('dnode'); var d = dnode.connect(1337); d.on('remote', function(remote) { remote.getTemperature(function(t) { console.log(\"Temperature is: \" + t + \"\\n\"); d.end(); }); }); On the Arduino server, a temp variable is continuously updated with the latest temperature from a connected sensor. The server also handles remote calls to its getTemperature function, executing the console.log callback provided by the client. Here’s the server code:\nvar dnode = require('dnode'); var five = require('johnny-five'); var board = new five.Board(); board.on('ready', function () { var therm = new five.Thermometer({ controller: \"TMP36\", pin: \"A0\", }); var temp = null; therm.on(\"change\", function() { temp = this.C; }); var server = dnode({ getTemperature: function(cb) { cb(temp); } }); server.listen(1337); }); These two examples, one with UDP sockets and the other with RPC, showcases the versatility of Johnny-Five in facilitating client-server communication for interactive hardware applications.\nDebugging with Console When debugging Arduino projects, the REPL (Read-Eval-Print Loop) proves to be a valuable tool. It facilitates seamless communication between your Arduino device and the Node.js terminal on your computer, enabling you to send and receive debug commands and messages. Let’s dive into an example of using the REPL to control an LED and log the result:\nvar five = require(\"johnny-five\"); var board = new five.Board(); board.on(\"ready\", function() { var led = new five.Led(13); this.repl.inject({ // Allow limited on/off control access to the LED instance from the REPL. on: function() { led.on(); console.log(\"LED is on\"); }, off: function() { led.off(); console.log(\"LED is off\"); } }); }); Executing the following commands in your Node.js terminal will turn the LED on and then off:\n\u003e on() LED is on \u003e off() LED is off While this example may seem trivial, it effectively showcases the power of real-time logging and interactive code execution of your Arduino from your terminal, and the ease in setting it all up.\nClosing I hope this summary provides a glimpse into the capabilities of Johnny-Five. With its user-friendly interface, it serves as an ideal platform for swiftly prototyping and implementing projects. If you’re feeling inspired, feel free to explore my workshop code.\n","wordCount":"925","inLanguage":"en","image":"https://akyidrian.github.io/posts/2018-04-22-electronics-and-javascript-actually-do-mix/images/arduinoSetup.jpg","datePublished":"2018-04-22T00:00:00Z","dateModified":"2018-04-22T00:00:00Z","author":{"@type":"Person","name":"Aydin Arik"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://akyidrian.github.io/posts/2018-04-22-electronics-and-javascript-actually-do-mix/"},"publisher":{"@type":"Organization","name":"Aydin Arik","logo":{"@type":"ImageObject","url":"https://akyidrian.github.io/favicon/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://akyidrian.github.io/ accesskey=h title="Aydin Arik (Alt + H)">Aydin Arik</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://akyidrian.github.io/blog/ title=Blog><span>Blog</span></a></li><li><a href=https://akyidrian.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://akyidrian.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://akyidrian.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Electronics and JavaScript Actually Do Mix</h1><div class=post-meta><span title='2018-04-22 00:00:00 +0000 UTC'>April 22, 2018</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;925 words&nbsp;·&nbsp;Aydin Arik&nbsp;|&nbsp;<a href="mailto:akyidrian.professor097@aleeas.com?subject=Suggest%20Changes%20to:%20/posts/2018-04-22-electronics-and-javascript-actually-do-mix.md" rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=eager src=https://akyidrian.github.io/images/arduinoSetup.jpg alt="Arduino Breadboard Setup"></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#getting-started>Getting Started</a></li><li><a href=#client-server-interaction>Client-Server Interaction</a></li><li><a href=#debugging-with-console>Debugging with Console</a></li><li><a href=#closing>Closing</a></li></ul></nav></div></details></div><div class=post-content><p>Since earning my EEE degree in 2013, I&rsquo;ve been amazed by the revolution in hardware prototyping driven by Arduino and Raspberry Pi. These platforms have democratised electronics, making them accessible to beginners. Equally fascinating is the evolution of JavaScript, which has grown from merely allowing the creation of dynamic web pages to enabling direct hardware control. Many of these now-commonplace tools were unavailable during my studies, making me envious of today&rsquo;s newcomers, yet excited for the rapid technological advancements to come.</p><p>During the NodeBots Workshop at <a href=https://akyidrian.github.io/posts/2018-04-21-conf-and-coffee-2018/>Conf & Coffee 2018</a>, I had the opportunity to revisit the basics and experiment with the open-source <a href=https://github.com/rwaldron/johnny-five>Johnny-Five</a> platform using an Arduino Uno. Johnny-Five, a Node.js library, facilitates JS programming for a wide range of development boards, with a focus on robotics and IoT applications. It relies on the <a href=https://github.com/firmata/protocol>Firmata</a> protocol to communicate with microcontrollers, and offers compatibility with <a href=https://github.com/rwaldron/IO-Plugins>custom boards</a> too.</p><h2 id=getting-started>Getting Started<a hidden class=anchor aria-hidden=true href=#getting-started>#</a></h2><p>Let&rsquo;s explore some of Johnny-Five&rsquo;s capabilities by first creating a simple LED blinking program:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>five</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;johnny-five&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>board</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>five</span><span class=p>.</span><span class=nx>Board</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>board</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;ready&#39;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>led</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>five</span><span class=p>.</span><span class=nx>Led</span><span class=p>(</span><span class=mi>13</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>led</span><span class=p>.</span><span class=nx>blink</span><span class=p>(</span><span class=mi>1000</span><span class=p>);</span> <span class=c1>// in ms
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>});</span>
</span></span></code></pre></div><p>As you can see, minimal code is required!</p><p>In addition to basic output control, Johnny-Five makes it easy to handle asynchronous events from various inputs. For example, here&rsquo;s how you can toggle an LED using a button press:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>five</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;johnny-five&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>board</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>five</span><span class=p>.</span><span class=nx>Board</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>board</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;ready&#39;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>led</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>five</span><span class=p>.</span><span class=nx>Led</span><span class=p>(</span><span class=mi>13</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>button</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>five</span><span class=p>.</span><span class=nx>Button</span><span class=p>(</span><span class=mi>5</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>button</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s2>&#34;press&#34;</span><span class=p>,</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>led</span><span class=p>.</span><span class=nx>toggle</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>You can also utilise Johnny-Five for sensor inputs, such as a photoresistor:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>five</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;johnny-five&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>board</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>five</span><span class=p>.</span><span class=nx>Board</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>board</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;ready&#39;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>led</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>five</span><span class=p>.</span><span class=nx>Led</span><span class=p>(</span><span class=mi>13</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>sensor</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>five</span><span class=p>.</span><span class=nx>Sensor</span><span class=p>(</span><span class=s2>&#34;A0&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>sensor</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s2>&#34;change&#34;</span><span class=p>,</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>value</span> <span class=o>&gt;</span> <span class=mi>600</span><span class=p>)</span> <span class=p>{</span> <span class=nx>led</span><span class=p>.</span><span class=nx>on</span><span class=p>();</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=p>{</span> <span class=nx>led</span><span class=p>.</span><span class=nx>off</span><span class=p>();</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>These simple examples demonstrate the ease of integrating hardware input-output with Johnny-Five. At no point did we need to write code for the round-robin loop, tune the loop frequency, configure data direction registers or mask the right pins with bit manipulation.</p><h2 id=client-server-interaction>Client-Server Interaction<a hidden class=anchor aria-hidden=true href=#client-server-interaction>#</a></h2><p>One surprising feature of Johnny-Five for me was its ability to create client-server scenarios effortlessly. For instance, you can set up a UDP client using Node.js on your developer machine to communicate with an Arduino server via USB:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>dgram</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;dgram&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>client</span> <span class=o>=</span> <span class=nx>dgram</span><span class=p>.</span><span class=nx>createSocket</span><span class=p>(</span><span class=s1>&#39;udp4&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Send empty datagrams over port 1337
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>client</span><span class=p>.</span><span class=nx>send</span><span class=p>(</span><span class=s2>&#34;&#34;</span><span class=p>,</span> <span class=mi>1337</span><span class=p>,</span> <span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s2>&#34;Failed to send. Is your Arduino running &#39;server.js&#39;?\n&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>client</span><span class=p>.</span><span class=nx>close</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>On the Arduino side, you can create a server to respond to incoming datagrams or trigger actions, such as playing a tune over a connected piezo speaker:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>dgram</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;dgram&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>five</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;johnny-five&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>board</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>five</span><span class=p>.</span><span class=nx>Board</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>board</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;ready&#39;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>piezo</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>five</span><span class=p>.</span><span class=nx>Piezo</span><span class=p>(</span><span class=mi>8</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>server</span> <span class=o>=</span> <span class=nx>dgram</span><span class=p>.</span><span class=nx>createSocket</span><span class=p>(</span><span class=s1>&#39;udp4&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>server</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;message&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>piezo</span><span class=p>.</span><span class=nx>play</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>song</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=s2>&#34;C4&#34;</span><span class=p>,</span> <span class=mi>1</span> <span class=o>/</span> <span class=mi>4</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=s2>&#34;D4&#34;</span><span class=p>,</span> <span class=mi>1</span> <span class=o>/</span> <span class=mi>4</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=s2>&#34;F4&#34;</span><span class=p>,</span> <span class=mi>1</span> <span class=o>/</span> <span class=mi>4</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=s2>&#34;D4&#34;</span><span class=p>,</span> <span class=mi>1</span> <span class=o>/</span> <span class=mi>4</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=s2>&#34;A4&#34;</span><span class=p>,</span> <span class=mi>1</span> <span class=o>/</span> <span class=mi>4</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=kc>null</span><span class=p>,</span> <span class=mi>1</span> <span class=o>/</span> <span class=mi>4</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=s2>&#34;A4&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=s2>&#34;G4&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=kc>null</span><span class=p>,</span> <span class=mi>1</span> <span class=o>/</span> <span class=mi>2</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=s2>&#34;C4&#34;</span><span class=p>,</span> <span class=mi>1</span> <span class=o>/</span> <span class=mi>4</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=s2>&#34;D4&#34;</span><span class=p>,</span> <span class=mi>1</span> <span class=o>/</span> <span class=mi>4</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=s2>&#34;F4&#34;</span><span class=p>,</span> <span class=mi>1</span> <span class=o>/</span> <span class=mi>4</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=s2>&#34;D4&#34;</span><span class=p>,</span> <span class=mi>1</span> <span class=o>/</span> <span class=mi>4</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=s2>&#34;G4&#34;</span><span class=p>,</span> <span class=mi>1</span> <span class=o>/</span> <span class=mi>4</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=kc>null</span><span class=p>,</span> <span class=mi>1</span> <span class=o>/</span> <span class=mi>4</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=s2>&#34;G4&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=s2>&#34;F4&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=kc>null</span><span class=p>,</span> <span class=mi>1</span> <span class=o>/</span> <span class=mi>2</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=nx>tempo</span><span class=o>:</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>server</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=mi>1337</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>On a similar note, I experimented with <a href=https://github.com/pkrumins/dnode>dnode</a>, an asynchronous RPC system for Node.js that facilitates remote function calls. A client, running on a developer&rsquo;s machine, connects to a server and calls a remote <code>getTemperature</code> function:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>dnode</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;dnode&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>d</span> <span class=o>=</span> <span class=nx>dnode</span><span class=p>.</span><span class=nx>connect</span><span class=p>(</span><span class=mi>1337</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>d</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;remote&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>remote</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>remote</span><span class=p>.</span><span class=nx>getTemperature</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>t</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;Temperature is: &#34;</span> <span class=o>+</span> <span class=nx>t</span> <span class=o>+</span> <span class=s2>&#34;\n&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>d</span><span class=p>.</span><span class=nx>end</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>On the Arduino server, a <code>temp</code> variable is continuously updated with the latest temperature from a connected sensor. The server also handles remote calls to its <code>getTemperature</code> function, executing the <code>console.log</code> callback provided by the client. Here&rsquo;s the server code:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>dnode</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;dnode&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>five</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;johnny-five&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>board</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>five</span><span class=p>.</span><span class=nx>Board</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>board</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;ready&#39;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>therm</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>five</span><span class=p>.</span><span class=nx>Thermometer</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>controller</span><span class=o>:</span> <span class=s2>&#34;TMP36&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>pin</span><span class=o>:</span> <span class=s2>&#34;A0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>temp</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>therm</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s2>&#34;change&#34;</span><span class=p>,</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>temp</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>C</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>server</span> <span class=o>=</span> <span class=nx>dnode</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>getTemperature</span><span class=o>:</span> <span class=kd>function</span><span class=p>(</span><span class=nx>cb</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>cb</span><span class=p>(</span><span class=nx>temp</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=nx>server</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mi>1337</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>These two examples, one with UDP sockets and the other with RPC, showcases the versatility of Johnny-Five in facilitating client-server communication for interactive hardware applications.</p><h2 id=debugging-with-console>Debugging with Console<a hidden class=anchor aria-hidden=true href=#debugging-with-console>#</a></h2><p>When debugging Arduino projects, the REPL (Read-Eval-Print Loop) proves to be a valuable tool. It facilitates seamless communication between your Arduino device and the Node.js terminal on your computer, enabling you to send and receive debug commands and messages. Let&rsquo;s dive into an example of using the REPL to control an LED and log the result:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>five</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;johnny-five&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>board</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>five</span><span class=p>.</span><span class=nx>Board</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>board</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s2>&#34;ready&#34;</span><span class=p>,</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>led</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>five</span><span class=p>.</span><span class=nx>Led</span><span class=p>(</span><span class=mi>13</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>repl</span><span class=p>.</span><span class=nx>inject</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Allow limited on/off control access to the LED instance from the REPL.
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>on</span><span class=o>:</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>led</span><span class=p>.</span><span class=nx>on</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;LED is on&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=nx>off</span><span class=o>:</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>led</span><span class=p>.</span><span class=nx>off</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;LED is off&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>Executing the following commands in your Node.js terminal will turn the LED on and then off:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>&gt;</span> <span class=nx>on</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nx>LED</span> <span class=nx>is</span> <span class=nx>on</span>
</span></span><span class=line><span class=cl><span class=o>&gt;</span> <span class=nx>off</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nx>LED</span> <span class=nx>is</span> <span class=nx>off</span>
</span></span></code></pre></div><p>While this example may seem trivial, it effectively showcases the power of real-time logging and interactive code execution of your Arduino from your terminal, and the ease in setting it all up.</p><h2 id=closing>Closing<a hidden class=anchor aria-hidden=true href=#closing>#</a></h2><p>I hope this summary provides a glimpse into the capabilities of Johnny-Five. With its user-friendly interface, it serves as an ideal platform for swiftly prototyping and implementing projects. If you&rsquo;re feeling inspired, feel free to explore <a href=https://github.com/akyidrian/nodebot-workshop>my workshop code</a>.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://akyidrian.github.io/tags/javascript/>Javascript</a></li><li><a href=https://akyidrian.github.io/tags/js/>Js</a></li><li><a href=https://akyidrian.github.io/tags/nodejs/>Nodejs</a></li><li><a href=https://akyidrian.github.io/tags/johnny-five/>Johnny-Five</a></li><li><a href=https://akyidrian.github.io/tags/arduino/>Arduino</a></li></ul><nav class=paginav><a class=next href=https://akyidrian.github.io/posts/2018-04-22-javascript-is-weird/><span class=title>Next »</span><br><span>JavaScript is Weird</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Electronics and JavaScript Actually Do Mix on x" href="https://x.com/intent/tweet/?text=Electronics%20and%20JavaScript%20Actually%20Do%20Mix&amp;url=https%3a%2f%2fakyidrian.github.io%2fposts%2f2018-04-22-electronics-and-javascript-actually-do-mix%2f&amp;hashtags=javascript%2cjs%2cnodejs%2cjohnny-five%2carduino"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Electronics and JavaScript Actually Do Mix on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fakyidrian.github.io%2fposts%2f2018-04-22-electronics-and-javascript-actually-do-mix%2f&amp;title=Electronics%20and%20JavaScript%20Actually%20Do%20Mix&amp;summary=Electronics%20and%20JavaScript%20Actually%20Do%20Mix&amp;source=https%3a%2f%2fakyidrian.github.io%2fposts%2f2018-04-22-electronics-and-javascript-actually-do-mix%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Electronics and JavaScript Actually Do Mix on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fakyidrian.github.io%2fposts%2f2018-04-22-electronics-and-javascript-actually-do-mix%2f&title=Electronics%20and%20JavaScript%20Actually%20Do%20Mix"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li></ul></footer></article></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><footer class=footer><span>&copy; 2024 <a href=https://akyidrian.github.io/>Aydin Arik</a></span></footer><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>